---
title: PKI体系（一）--PKI介绍
date: 2018-07-11 00:15:23
keyword:
- PKI
- EJBCA
tags: 
- PKI
- EJBCA
- 安全
categories:
- 安全
---

公钥基础设施(Public Key Infrastructure，简称PKI)是目前网络安全建设的基础和核心，是电子商务，物联网安全实施的基础保障。本文主要对PKI进行整体的介绍和总结，包含证书认证CA，证书生成RA，证书废弃列表CRL，证书在线验证OSCP，证书的使用，以及一些基础概念的介绍。

<!--more-->
# 前言
随着网络技术和信息技术的发展，电子商务已逐步被人们所接受，并在得到不断普及。但由于各种原因，国内电子商务的安全性仍不能得到有效的保障。在常规业务中，交易双方现场交易，可以确认购买双方的身份。利用商场开具的发票和客户现场支付商品费用，无须担心发生纠纷和无凭证可依。但通过网上进行电子商务交易 时，由于交易双方并不现场交易，因此，无法确认双方的合法身份，同时交易信息是交易双方的商业秘密，在网上传输时必须保证安全性，防止信息被窃取；双方的交易非现场交易，一旦发生纠纷，必须能够提供仲裁。

因此，在电子商务中，必须从技术上保证在交易过程中能够实现身份认证、安全传输、不可否认性、数据完整性。在采用数字证书认证体系之前，交易安全一直未能真正得到解决。由于数字证书认证技术采用了加密传输和数字签名，能够实现上述要求，因此在国内外电子商务中，都得到了广泛的应用。

PKI采用证书进行公钥管理，通过第三方的可信任机构（认证中心，即CA），把用户的公钥和用户的其他标识信息捆绑在一起，其中包括用户名和电子邮件地址等信息，以在Internet网上验证用户的身份。PKI把公钥密码和对称密码结合起来，在Internet网上实现密钥的自动管理，保证网上数据的安全传输。

因此，从大的方面来说，所有提供公钥加密和数字签名服务的系统，都可归结为PKI系统的一部分，PKI的主要目的是通过自动管理密钥和证书，为用户建立起一个安全的网络运行环境，使用户可以在多种应用环境下方便的使用加密和数字签名技术，从而保证网上数据的机密性、完整性、有效性。数据的机密性是指数据在传输过程中，不能被非授权者偷看；数据的完整性是指数据在传输过程中不能被非法篡改；数据的有效性是指数据不能被否认。

一个有效的PKI系统必须是安全的和透明的，用户在获得加密和数字签名服务时，不需要详细地了解PKI的内部运作机制。在一个典型、完整和有效的PKI系统中，除证书的创建和发布，特别是证书的撤销，一个可用的PKI产品还必须提供相应的密钥管理服务，包括密钥的备份、恢复和更新等。没有一个好的密钥管理系统，将极大影响一个PKI系统的规模、可伸缩性和在协同网络中的运行成本。在一个企业中，PKI系统必须有能力为一个用户管理多对密钥和证书；能够提供安全策略编辑和管理工具，如密钥周期和密钥用途等。

PKI发展的一个重要方面就是标准化问题，它也是建立互操作性的基础。目前，PKI标准化主要有两个方面：一是RSA公司的公钥加密标准PKCS（Public Key Cryptography Standards）,它定义了许多基本PKI部件，包括数字签名和证书请求格式等；二是由Internet工程任务组IETF（Internet Engineering Task Force）和PKI工作组PKIX（Public Key Infrastructure Working Group）所定义的一组具有互操作性的公钥基础设施协议。在今后很长的一段时间内，PKCS和PKIX将会并存，大部分的PKI产品为保持兼容性，也将会对这两种标准进行支持。

PKI的发展非常快，已经从几年前的理论阶段过渡到目前的产品阶段，并且出现了大量成熟技术、产品和解决方案，正逐步走向成熟。PKI的发展受应用驱动的影响，比如，早期的Internet商务和Web安全要求主要依赖于SSL，并要求应用首先对证书进行处理，所以，在很多公司的消息和群组产品中都提供了公钥和证书系统，如Exchange和Notes等。另外，基于标准的基础设施和应用也同样促进了PKI的发展，它能够保证基于Internet的安全消息传送的可交互性，如S/MIME等。

目前，PKI产品的生产厂家很多，比较有代表性的主要有VeriSign和Entrust。VeriSign作为RSA的控股公司，借助RSA成熟的安全技术，提供了PKI产品，为用户之间的内部信息交互提供安全保障。另外，VeriSign也提供对外的CA服务，包括证书的发布和管理等功能，并且同一些大的生产商，如Microsoft、Netscape和JavaSoft等，保持了伙伴关系，以在Internet上提供代码签名服务。

Entrust作为北方电讯（Northern Telecom）的控股公司，从事PKI的研究与产品开发已经有很多年的历史了，并一直在业界保持领先地位，拥有许多成熟的PKI及配套产品，并提供了有效的密钥管理功能。

# PKI组成

![](450px-Public-Key-Infrastructure.svg.png)


1. Certificate Authority(CA) 证书颁发机构(or系统)，CA是PKI的基础，它管理着证书的整个生命周期，其作用包括：发放证书，规定证书有效期，废弃不良信用证书。
2. Registration Authority(RA) 证书注册，登记机构(or系统)，RA提供一个用户和CA之前的桥梁，用户通过RA进行证书的申请，RA获取用户的身份信息并确认用户的信息，向CA提出证书申请。
它接受用户的注册申请，审查用户的申请资格，并决定是否同意CA给其签发数字证书。注册机构并不给用户签发证书，而只是对用户进行资格审查。因此，RA可以设置在直接面对客户的业务部门，如银行的营业部、机构认识部门等。当然，对于一个规模较小的PKI应用系统来说，可把注册管理的职能由认证中心CA来完成，而不设立独立运行的RA。但这并不是取消了PKI的注册功能，而只是将其作为CA的一项功能而已。PKI国际标准推荐由一个独立的RA来完成注册管理的任务，可以增强应用系统的安全。
> 这里的用户是指将要申请证书的客户，可以是个人，集团或团体，政府机构等 
3. Validation Authority(VA) 证书验证机构(or系统)。在PKI中，VA是一个实体，它根据X.509标准和RFC 5280（第69页）中描述的机制提供用于验证数字证书有效性的服务。
> VA一般由第三方来提供，PKI对VA没有强制要求，可以是Nginx， Tomcat等 